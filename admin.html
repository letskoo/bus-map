<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>í¬ì¸íŠ¸ ê´€ë¦¬ì</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
  font-family: Arial;
  padding:20px;
  background:#111;
  color:#fff;
}
input,button{
  width:100%;
  padding:15px;
  margin-top:10px;
  font-size:18px;
  border-radius:8px;
  border:none;
}
button{
  background:#00c853;
  color:#fff;
  font-weight:bold;
}
.card{
  background:#1e1e1e;
  padding:20px;
  border-radius:12px;
  margin-top:20px;
}
</style>
</head>

<body>

<h2>ğŸ’° í¬ì¸íŠ¸ ì¶©ì „ ê´€ë¦¬ì</h2>

<div class="card">
<label>í•™ì›ID</label>
<input id="orgId" placeholder="organizationId">

<label>ì¶©ì „ í¬ì¸íŠ¸ (+ìˆ«ì)</label>
<input id="amount" placeholder="ì˜ˆ: 1000">

<label>ì‚¬ìœ </label>
<input id="reason" placeholder="ê³„ì¢Œì´ì²´">

<button onclick="charge()">ì¶©ì „í•˜ê¸°</button>
</div>

<div class="card">
<label>ì”ì•¡ ì¡°íšŒ (í•™ì›ID)</label>
<input id="checkId" placeholder="organizationId">
<button onclick="check()">ì”ì•¡ í™•ì¸</button>
<div id="result"></div>
</div>

<script>
const SERVER="http://localhost:3000"; // ë‚˜ì¤‘ì— ì„œë²„ì£¼ì†Œ ë³€ê²½

async function charge(){
  const organizationId=document.getElementById("orgId").value;
  const amount=document.getElementById("amount").value;
  const reason=document.getElementById("reason").value || "ê³„ì¢Œì¶©ì „";

  const res=await fetch(SERVER+"/admin/points/adjust",{
    method:"POST",
    headers:{"Content-Type":"application/json"},
    body:JSON.stringify({
      organizationId:Number(organizationId),
      amount:Number(amount),
      reason:reason
    })
  });

  const data=await res.json();
  alert("ì¶©ì „ì™„ë£Œ\nì”ì•¡:"+data.points);
}

async function check(){
  const id=document.getElementById("checkId").value;
  const res=await fetch(SERVER+"/points/balance?organizationId="+id);
  const data=await res.json();
  document.getElementById("result").innerHTML=
    "í•™ì›:"+data.name+"<br>ì”ì•¡:"+data.points;
}
</script>

</body>
</html>