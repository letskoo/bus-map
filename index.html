<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ë²„ìŠ¤ ìœ„ì¹˜</title>

<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=7760a4557ccbf1f9dd40e051124ba1fc"></script>

<style>
html,body{
margin:0;
padding:0;
height:100%;
background:#000;
}
#map{
width:100%;
height:100vh;
}
</style>
</head>

<body>

<div id="map"></div>

<script>
const SERVER="https://bus-server-production.up.railway.app";

const container=document.getElementById("map");

const options={
center:new kakao.maps.LatLng(36.3504,127.3845),
level:3
};

const map=new kakao.maps.Map(container,options);

const marker=new kakao.maps.Marker({
position:options.center
});
marker.setMap(map);

// ğŸ”¥ ì‹¤ì‹œê°„ ìœ„ì¹˜ ë°˜ì˜
async function update(){
try{
const res=await fetch(SERVER+"/driver/location/1");
const data=await res.json();

if(!data.latitude) return;

const pos=new kakao.maps.LatLng(data.latitude,data.longitude);
marker.setPosition(pos);
map.setCenter(pos);

}catch(e){
console.log("no data");
}
}

setInterval(update,2000);
update();
</script>

</body>
</html>